<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Appcanary</title>
  <subtitle>&lt;a href="https://appcanary.com"&gt;Appcanary&lt;/a&gt; makes sure you never run vulnerable software in your apps.</subtitle>
  <id>http://blog.appcanary.com</id>
  <link href="http://blog.appcanary.com"/>
  <link href="http://blog.appcanary.com/rss.xml" rel="self"/>
  <updated>2016-01-24T19:00:00-05:00</updated>
  <entry>
    <title>Slippery exceptions in clojure</title>
    <link rel="alternate" href="http://blog.appcanary.com/2016/slippery-clojure-exceptions.html"/>
    <id>http://blog.appcanary.com/2016/slippery-clojure-exceptions.html</id>
    <published>2016-01-24T19:00:00-05:00</published>
    <updated>2016-01-28T11:12:44-05:00</updated>
    <author>
      <name>Phillip Mendonça-Vieira</name>
    </author>
    <content type="html">&lt;p&gt;Recently I spent a couple of hours banging my head against code that looks like this:&lt;/p&gt;
&lt;pre class="highlight clojure"&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;defn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parse-file&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;filter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;identity&lt;/span&gt;&lt;span class="w"&gt;
          &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;code-that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;throws-an-exception&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;&lt;span class="w"&gt;

&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;defn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;consume-manifest&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;try+&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;app/parse-file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kind&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    

    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;catch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;java.lang.Exception&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="w"&gt;
      &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;throw+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="no"&gt;:type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;::bad-parse&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;:message&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"Invalid file."&lt;/span&gt;&lt;span class="p"&gt;}))))&lt;/span&gt;&lt;span class="w"&gt;

&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;defn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;check&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;try+&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;artifacts&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;consume-manifest&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;slurp&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kind&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
      &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;not-empty&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;artifacts&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
        &lt;/span&gt;&lt;span class="err"&gt;…&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And much to my surprise, I kept getting the kind of exception &lt;code&gt;parse-file&lt;/code&gt; generates deep within the &lt;code&gt;check&lt;/code&gt; function, right up against &lt;code&gt;(not-empty artifacts)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I&amp;rsquo;ve grown somewhat used to Clojure exceptions being unhelpful, but this was taking the cake. Coming from Ruby and pretty much every other language, this brushed up rudely against my expectations. &lt;/p&gt;

&lt;p&gt;We&amp;rsquo;d had some trouble in the past getting &lt;a href="https://github.com/scgilardi/slingshot"&gt;slingshot&lt;/a&gt; to behave properly, so I zero&amp;#39;ed in on there. Don&amp;rsquo;t all exceptions in Java descend from Exception? You can tell that exceptions in Clojure are unloved, given how cumbersome handling them natively is.&lt;/p&gt;

&lt;p&gt;Stepping through &lt;code&gt;check&lt;/code&gt; in the &lt;a href="cursive-ide.com"&gt;Cursive&lt;/a&gt; debugger, I could see that the exception generated didn&amp;rsquo;t have the &lt;code&gt;type&lt;/code&gt; &amp;ldquo;annotation&amp;rdquo; being set in &lt;code&gt;consume-manifest&lt;/code&gt;, which meant that the exception was slipping straight through it. But calling &lt;code&gt;consume-manifest&lt;/code&gt; directly in my repl was causing it to work as intended.&lt;/p&gt;

&lt;p&gt;What the hell was going on?&lt;/p&gt;

&lt;p&gt;&lt;a href="https://twitter.com/mveytsman"&gt;Max&lt;/a&gt; took one look at it and set me straight. &amp;ldquo;Oh. &lt;a href="https://clojuredocs.org/clojure.core/filter"&gt;filter&lt;/a&gt; is lazy, so the exception isn&amp;rsquo;t being throw until the lazy sequence is accessed.&amp;rdquo;&lt;/p&gt;

&lt;p&gt;Excuse me? I had an angry expression on my face. He looked sheepish.&lt;/p&gt;

&lt;p&gt;&amp;ldquo;How else would a lazy data structure work?&amp;rdquo;&lt;/p&gt;

&lt;p&gt;Well. I would expect a &lt;code&gt;catch java.lang.Exception&lt;/code&gt; to &lt;em&gt;catch every exception&lt;/em&gt;. This is some outrageous shit right here.&lt;/p&gt;

&lt;p&gt;&amp;ldquo;Right, well, hear me out. What if you had the following Ruby?&amp;rdquo;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;lazy_parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;each_line&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;each_with_index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;lazy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;map&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
    &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="s2"&gt;"You can't catch me, I'm the exception man"&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;
    &lt;span class="n"&gt;line&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;consume_file&lt;/span&gt;
  &lt;span class="k"&gt;begin&lt;/span&gt;
    &lt;span class="n"&gt;lazy_parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Gemfile.lock"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;rescue&lt;/span&gt;
    &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"Woops, an exception. Good thing we caught it."&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;consume_file&lt;/span&gt;
&lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;first&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(Did you know that Ruby has had &lt;a href="http://railsware.com/blog/2012/03/13/ruby-2-0-enumerablelazy/"&gt;lazy enumerables&lt;/a&gt; for almost four years now? Worth reading &lt;a href="http://patshaughnessy.net/2013/4/3/ruby-2-0-works-hard-so-you-can-be-lazy"&gt;Shaughnessy as well&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;That shut me up good. And in case you were wondering, the stack trace is also garbage in Ruby; there simply isn&amp;rsquo;t any context for it to preserve. Frankly, I&amp;rsquo;ve just never had to think about lazy data structures in Rubbyland; they&amp;rsquo;ve not been super popular. &lt;/p&gt;

&lt;p&gt;It&amp;rsquo;s hard to reason about this. I want to write wrapper functions that make my code safe to consume downstream. This isn&amp;rsquo;t feasible for any functions iterating over &lt;a href="http://rosettacode.org/wiki/Infinity#Clojure"&gt;&lt;code&gt;(/ 1.0 0.0)&lt;/code&gt;&lt;/a&gt;, but fortunately for us we need to fit this file into memory anyways. In Ruby we&amp;rsquo;d have to force iterate over the whole sequence, but Clojure makes this easy with &lt;a href="https://clojuredocs.org/clojure.core/doall"&gt;&lt;code&gt;doall&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;pre class="highlight clojure"&gt;&lt;code&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;defn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parse-file&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;doall&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;filter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;identity&lt;/span&gt;&lt;span class="w"&gt;
                 &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;code-that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;throws-an-exception&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And now, things behave as intended.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Hello Appcanary</title>
    <link rel="alternate" href="http://blog.appcanary.com/2015/hello-appcanary.html"/>
    <id>http://blog.appcanary.com/2015/hello-appcanary.html</id>
    <published>2015-10-25T20:00:00-04:00</published>
    <updated>2016-01-28T11:13:08-05:00</updated>
    <author>
      <name>Team Appcanary</name>
    </author>
    <content type="html">&lt;p&gt;Dear friends,&amp;nbsp;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;tl;dr&lt;/strong&gt; We launched &lt;a href="https://appcanary.com"&gt;Appcanary&lt;/a&gt;, we’re shutting down Gemcanary Dec 31st 2015, we have great plans for the future, we love you.&lt;/p&gt;

&lt;p&gt;&lt;img alt="image" src="/images/gemcanary_comic.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;We’ve been busy. We got to spend the summer in sunny California attending Y Combinator. We learned a lot, it was well worth it.&lt;/p&gt;

&lt;p&gt;During the summer, we launched the first version of our product, &lt;a href="https://appcanary.com"&gt;Appcanary&lt;/a&gt;. We help companies to track the security of the software components they rely on. Simply run our agent on your servers, and keep tabs on the packages on your systems. It’s pretty cool! There are a lot of moving parts.&lt;/p&gt;

&lt;p&gt;In the meantime, we courted a small cadre of investors who believe in our ideas about the future. We’re pretty excited for what we’ll be able to do over the next couple of years.&lt;/p&gt;

&lt;p&gt;We also released &lt;a href="https://isitvulnerable.com"&gt;isitvulnerable.com&lt;/a&gt;. It’s a free tool that lets you drag and drop your gemfile and check for vulnerable dependencies. &lt;/p&gt;

&lt;p&gt;Once, we even managed to go to the beach.&lt;/p&gt;

&lt;p&gt;&lt;a href="https://instagram.com/p/5Y8-dqSz3u"&gt;&lt;/a&gt;
&lt;img alt="image" src="/images/big_sur.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;In a nutshell, we want to change the way software and operation engineers engage with security. Right now people largely don’t, or have to deal with lots of snakeoil. It’s hard to know what to think. We think we can drastically improve how we keep our systems safe. We have lots of things to share with you soon!&lt;/p&gt;

&lt;p&gt;For now though, we’d like to announce that we’re sunsetting&amp;nbsp;&lt;a href="https://gemcanary.com"&gt;Gemcanary&lt;/a&gt;, the free, Ruby-only, Github-only service we created in 2013. The service will shut down December 31st, 2015.&amp;nbsp;&lt;/p&gt;

&lt;p&gt;We started Gemcanary all the way back in February 2013. Things were different back then; we ran a fledgeling consultancy, Edward Snowden was about to book a flight to Hong Kong, and Heartbleed was still hidden away in our openssls.&lt;/p&gt;

&lt;p&gt;We’ve since spent a lot of time breaking and building apps. We became a real startup. And, frankly, we think our customers will be better served by not requiring such tight integration with Github.&lt;/p&gt;

&lt;p&gt;If you enjoyed the service, you’ll be happy to note that we provide the same value and more via&amp;nbsp;&lt;a href="https://appcanary.com"&gt;Appcanary&lt;/a&gt;. While Gemcanary could never tell you about Heartbleed, Appcanary will let you keep tabs on all of your infrastructure’s dependencies.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;&lt;a href="https://twitter.com/phillmv"&gt;@phillmv&lt;/a&gt; and &lt;a href="https://twitter.com/mveytsman"&gt;@mveytsman&lt;/a&gt;. Comic by &lt;a href="https://twitter.com/0sn"&gt;Nick Wolfe&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Hello World</title>
    <link rel="alternate" href="http://blog.appcanary.com/2015/hello-world.html"/>
    <id>http://blog.appcanary.com/2015/hello-world.html</id>
    <published>2015-07-25T20:00:00-04:00</published>
    <updated>2016-01-27T17:02:04-05:00</updated>
    <author>
      <name>Team Appcanary</name>
    </author>
    <content type="html">&lt;ol&gt;
&lt;li&gt;&lt;p&gt;In 2015, building web aplications involves more moving parts than ever before. The average web app depends on the interaction of hundreds of distinct open source software libraries.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The easiest way to hack someone is through publically disclosed vulnerabilities they never patched.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Due to a variety of technological but mostly social problems, it is really time consuming and expensive to find out about new vulns that affect us and keep our web apps patched. We mostly rely on email, twitter and hacker news as distribution channels.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;This sucks.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;We&amp;rsquo;re going to fix this. There&amp;rsquo;s no reason anybody should be running vulnerable software.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Visit our page to &lt;a href="https://appcanary.com"&gt;find out more&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Sincerely,
&lt;a href="https://twitter.com/phillmv"&gt;@phillmv&lt;/a&gt; and &lt;a href="https://twitter.com/mveytsman"&gt;@mveytsman&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
</feed>
